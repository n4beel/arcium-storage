Checking if encrypted instructions are up to date.
Encrypted instructions are up to date. Skipping build.
WARNING: `anchor-lang` version(0.31.1) and the current CLI version(0.32.1) don't match.

	This can lead to unwanted behavior. To use the same CLI version, add:

	[toolchain]
	anchor_version = "0.31.1"

	to Anchor.toml

WARNING: `@coral-xyz/anchor` version(^0.31.1) and the current CLI version(0.32.1) don't match.

	This can lead to unwanted behavior. To fix, upgrade the package by running:

	yarn upgrade @coral-xyz/anchor@0.32.1

warning: Patch `proc-macro2 v1.0.97 (https://github.com/arcium-hq/proc-macro2.git#b52c9661)` was not used in the crate graph.
Check that the patched package version and available features are compatible
with the dependency requirements. If the patch has a different version from
what is locked in the Cargo.lock file, run `cargo update` to use the new
version. This may also occur with an optional dependency that is not enabled.
Error: Function _ZN109_$LT$arcium_client..idl..arcium..utils..Account$u20$as$u20$core..convert..TryFrom$LT$$RF$$u5b$u8$u5d$$GT$$GT$8try_from17hf32cecf3aadd980fE Stack offset of 721512 exceeded max offset of 4096 by 717416 bytes, please minimize large stack variables. Estimated function frame size: 721536 bytes. Exceeding the maximum stack offset may cause undefined behavior during execution.

warning: unexpected `cfg` condition value: `custom-heap`
 --> programs/share_medical_records/src/lib.rs:8:1
  |
8 | #[arcium_program]
  | ^^^^^^^^^^^^^^^^^
  |
  = note: expected values for `feature` are: `cpi`, `default`, `idl-build`, `no-entrypoint`, `no-idl`, and `no-log-ix-name`
  = help: consider adding `custom-heap` as a feature in `Cargo.toml`
  = note: see <https://doc.rust-lang.org/nightly/rustc/check-cfg/cargo-specifics.html> for more information about checking conditional configuration
  = note: `#[warn(unexpected_cfgs)]` on by default
  = note: this warning originates in the macro `$crate::custom_heap_default` which comes from the expansion of the attribute macro `program` (in Nightly builds, run with -Z macro-backtrace for more info)

warning: unexpected `cfg` condition value: `custom-panic`
 --> programs/share_medical_records/src/lib.rs:8:1
  |
8 | #[arcium_program]
  | ^^^^^^^^^^^^^^^^^
  |
  = note: expected values for `feature` are: `cpi`, `default`, `idl-build`, `no-entrypoint`, `no-idl`, and `no-log-ix-name`
  = help: consider adding `custom-panic` as a feature in `Cargo.toml`
  = note: see <https://doc.rust-lang.org/nightly/rustc/check-cfg/cargo-specifics.html> for more information about checking conditional configuration
  = note: this warning originates in the macro `$crate::custom_panic_default` which comes from the expansion of the attribute macro `program` (in Nightly builds, run with -Z macro-backtrace for more info)

warning: unexpected `cfg` condition value: `anchor-debug`
 --> programs/share_medical_records/src/lib.rs:8:1
  |
8 | #[arcium_program]
  | ^^^^^^^^^^^^^^^^^
  |
  = note: expected values for `feature` are: `cpi`, `default`, `idl-build`, `no-entrypoint`, `no-idl`, and `no-log-ix-name`
  = help: consider adding `anchor-debug` as a feature in `Cargo.toml`
  = note: see <https://doc.rust-lang.org/nightly/rustc/check-cfg/cargo-specifics.html> for more information about checking conditional configuration
  = note: this warning originates in the attribute macro `program` (in Nightly builds, run with -Z macro-backtrace for more info)

warning: unexpected `cfg` condition value: `anchor-debug`
 --> programs/share_medical_records/src/lib.rs:8:1
  |
8 | #[arcium_program]
  | ^^^^^^^^^^^^^^^^^
  |
  = note: expected values for `feature` are: `cpi`, `default`, `idl-build`, `no-entrypoint`, `no-idl`, and `no-log-ix-name`
  = help: consider adding `anchor-debug` as a feature in `Cargo.toml`
  = note: see <https://doc.rust-lang.org/nightly/rustc/check-cfg/cargo-specifics.html> for more information about checking conditional configuration
  = note: this warning originates in the derive macro `Accounts` (in Nightly builds, run with -Z macro-backtrace for more info)

warning: unexpected `cfg` condition value: `anchor-debug`
   --> programs/share_medical_records/src/lib.rs:130:10
    |
130 | #[derive(Accounts)]
    |          ^^^^^^^^
    |
    = note: expected values for `feature` are: `cpi`, `default`, `idl-build`, `no-entrypoint`, `no-idl`, and `no-log-ix-name`
    = help: consider adding `anchor-debug` as a feature in `Cargo.toml`
    = note: see <https://doc.rust-lang.org/nightly/rustc/check-cfg/cargo-specifics.html> for more information about checking conditional configuration
    = note: this warning originates in the derive macro `Accounts` (in Nightly builds, run with -Z macro-backtrace for more info)

warning: unexpected `cfg` condition value: `anchor-debug`
   --> programs/share_medical_records/src/lib.rs:146:10
    |
146 | #[derive(Accounts)]
    |          ^^^^^^^^
    |
    = note: expected values for `feature` are: `cpi`, `default`, `idl-build`, `no-entrypoint`, `no-idl`, and `no-log-ix-name`
    = help: consider adding `anchor-debug` as a feature in `Cargo.toml`
    = note: see <https://doc.rust-lang.org/nightly/rustc/check-cfg/cargo-specifics.html> for more information about checking conditional configuration
    = note: this warning originates in the derive macro `Accounts` (in Nightly builds, run with -Z macro-backtrace for more info)

warning: unexpected `cfg` condition value: `anchor-debug`
   --> programs/share_medical_records/src/lib.rs:206:10
    |
206 | #[derive(Accounts)]
    |          ^^^^^^^^
    |
    = note: expected values for `feature` are: `cpi`, `default`, `idl-build`, `no-entrypoint`, `no-idl`, and `no-log-ix-name`
    = help: consider adding `anchor-debug` as a feature in `Cargo.toml`
    = note: see <https://doc.rust-lang.org/nightly/rustc/check-cfg/cargo-specifics.html> for more information about checking conditional configuration
    = note: this warning originates in the derive macro `Accounts` (in Nightly builds, run with -Z macro-backtrace for more info)

warning: unexpected `cfg` condition value: `anchor-debug`
   --> programs/share_medical_records/src/lib.rs:219:10
    |
219 | #[derive(Accounts)]
    |          ^^^^^^^^
    |
    = note: expected values for `feature` are: `cpi`, `default`, `idl-build`, `no-entrypoint`, `no-idl`, and `no-log-ix-name`
    = help: consider adding `anchor-debug` as a feature in `Cargo.toml`
    = note: see <https://doc.rust-lang.org/nightly/rustc/check-cfg/cargo-specifics.html> for more information about checking conditional configuration
    = note: this warning originates in the derive macro `Accounts` (in Nightly builds, run with -Z macro-backtrace for more info)

warning: use of deprecated method `anchor_lang::prelude::AccountInfo::<'a>::realloc`: Use AccountInfo::resize() instead
 --> programs/share_medical_records/src/lib.rs:8:1
  |
8 | #[arcium_program]
  | ^^^^^^^^^^^^^^^^^
  |
  = note: `#[warn(deprecated)]` on by default
  = note: this warning originates in the attribute macro `program` (in Nightly builds, run with -Z macro-backtrace for more info)

warning: `share_medical_records` (lib) generated 14 warnings (5 duplicates)
    Finished `release` profile [optimized] target(s) in 1.05s
warning: Patch `proc-macro2 v1.0.97 (https://github.com/arcium-hq/proc-macro2.git#b52c9661)` was not used in the crate graph.
Check that the patched package version and available features are compatible
with the dependency requirements. If the patch has a different version from
what is locked in the Cargo.lock file, run `cargo update` to use the new
version. This may also occur with an optional dependency that is not enabled.
    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.41s
     Running unittests src/lib.rs (/home/n4beel/Desktop/Projects/arcium-examples/share_medical_records/target/debug/deps/share_medical_records-749fa0be1425ea8c)
Clean completed successfully!
Generating accounts with owner pubkey: GAUpeGKms2qQ4GY9rkzB6FJ7W96pg5Gowa8imLr2XnZ9
Generating new keypair for node at artifacts/localnet/node_0.json
Generating new callback keypair for node at artifacts/localnet/node_callback_0.json
Generating new keypair for identity at artifacts/localnet/identity_0.pem
Generating new keypair for node at artifacts/localnet/node_1.json
Generating new callback keypair for node at artifacts/localnet/node_callback_1.json
Generating new keypair for identity at artifacts/localnet/identity_1.pem
Arcium Program downloaded successfully
Creating genesis accounts...
Starting anchor localnet...
Waiting for solana localnet to come online at http://127.0.0.1:8899...
Solana localnet is online ‚úîÔ∏è
Starting Arcium node(s)...
Waiting for the arcium nodes to come online...
Arcium nodes are online ‚úîÔ∏è
Solana localnet & Arx nodes are online! üéâ

Found a 'test' script in the Anchor.toml. Running it as a test suite!

Running test suite: "/home/n4beel/Desktop/Projects/arcium-examples/share_medical_records/Anchor.toml"

yarn run v1.22.22
$ /home/n4beel/Desktop/Projects/arcium-examples/share_medical_records/node_modules/.bin/ts-mocha -p ./tsconfig.json -t 1000000 'tests/**/*.ts'
(node:87758) [MODULE_TYPELESS_PACKAGE_JSON] Warning: Module type of file:///home/n4beel/Desktop/Projects/arcium-examples/share_medical_records/tests/share_medical_records.ts is not specified and it doesn't parse as CommonJS.
Reparsing as ES module because module syntax was detected. This incurs a performance overhead.
To eliminate this warning, add "type": "module" to /home/n4beel/Desktop/Projects/arcium-examples/share_medical_records/package.json.
(Use `node --trace-warnings ...` to show where the warning was created)


  ShareMedicalRecords
Attempt 1 failed to fetch MXE public key: Error: Account does not exist or has no data 7nSRR1844LguKJUnh8CA6AKCwd5u7K1Lx4EhPdCeXK5y
    at AccountClient.fetch (/home/n4beel/Desktop/Projects/arcium-examples/share_medical_records/node_modules/@coral-xyz/anchor/src/program/namespace/account.ts:168:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at getMXEPublicKey (/home/n4beel/Desktop/Projects/arcium-examples/share_medical_records/node_modules/@arcium-hq/client/build/index.cjs:8261:24)
Retrying in 500ms... (attempt 1/10)
Attempt 2 failed to fetch MXE public key: Error: Account does not exist or has no data 7nSRR1844LguKJUnh8CA6AKCwd5u7K1Lx4EhPdCeXK5y
    at AccountClient.fetch (/home/n4beel/Desktop/Projects/arcium-examples/share_medical_records/node_modules/@coral-xyz/anchor/src/program/namespace/account.ts:168:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at getMXEPublicKey (/home/n4beel/Desktop/Projects/arcium-examples/share_medical_records/node_modules/@arcium-hq/client/build/index.cjs:8261:24)
Retrying in 500ms... (attempt 2/10)
Attempt 3 failed to fetch MXE public key: Error: Account does not exist or has no data 7nSRR1844LguKJUnh8CA6AKCwd5u7K1Lx4EhPdCeXK5y
    at AccountClient.fetch (/home/n4beel/Desktop/Projects/arcium-examples/share_medical_records/node_modules/@coral-xyz/anchor/src/program/namespace/account.ts:168:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at getMXEPublicKey (/home/n4beel/Desktop/Projects/arcium-examples/share_medical_records/node_modules/@arcium-hq/client/build/index.cjs:8261:24)
Retrying in 500ms... (attempt 3/10)
Attempt 4 failed to fetch MXE public key: Error: Account does not exist or has no data 7nSRR1844LguKJUnh8CA6AKCwd5u7K1Lx4EhPdCeXK5y
    at AccountClient.fetch (/home/n4beel/Desktop/Projects/arcium-examples/share_medical_records/node_modules/@coral-xyz/anchor/src/program/namespace/account.ts:168:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at getMXEPublicKey (/home/n4beel/Desktop/Projects/arcium-examples/share_medical_records/node_modules/@arcium-hq/client/build/index.cjs:8261:24)
Retrying in 500ms... (attempt 4/10)
Attempt 5 failed to fetch MXE public key: Error: Account does not exist or has no data 7nSRR1844LguKJUnh8CA6AKCwd5u7K1Lx4EhPdCeXK5y
    at AccountClient.fetch (/home/n4beel/Desktop/Projects/arcium-examples/share_medical_records/node_modules/@coral-xyz/anchor/src/program/namespace/account.ts:168:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at getMXEPublicKey (/home/n4beel/Desktop/Projects/arcium-examples/share_medical_records/node_modules/@arcium-hq/client/build/index.cjs:8261:24)
Retrying in 500ms... (attempt 5/10)
Attempt 6 failed to fetch MXE public key: Error: Account does not exist or has no data 7nSRR1844LguKJUnh8CA6AKCwd5u7K1Lx4EhPdCeXK5y
    at AccountClient.fetch (/home/n4beel/Desktop/Projects/arcium-examples/share_medical_records/node_modules/@coral-xyz/anchor/src/program/namespace/account.ts:168:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at getMXEPublicKey (/home/n4beel/Desktop/Projects/arcium-examples/share_medical_records/node_modules/@arcium-hq/client/build/index.cjs:8261:24)
Retrying in 500ms... (attempt 6/10)
Attempt 7 failed to fetch MXE public key: Error: Account does not exist or has no data 7nSRR1844LguKJUnh8CA6AKCwd5u7K1Lx4EhPdCeXK5y
    at AccountClient.fetch (/home/n4beel/Desktop/Projects/arcium-examples/share_medical_records/node_modules/@coral-xyz/anchor/src/program/namespace/account.ts:168:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at getMXEPublicKey (/home/n4beel/Desktop/Projects/arcium-examples/share_medical_records/node_modules/@arcium-hq/client/build/index.cjs:8261:24)
Retrying in 500ms... (attempt 7/10)
Attempt 8 failed to fetch MXE public key: Error: Account does not exist or has no data 7nSRR1844LguKJUnh8CA6AKCwd5u7K1Lx4EhPdCeXK5y
    at AccountClient.fetch (/home/n4beel/Desktop/Projects/arcium-examples/share_medical_records/node_modules/@coral-xyz/anchor/src/program/namespace/account.ts:168:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at getMXEPublicKey (/home/n4beel/Desktop/Projects/arcium-examples/share_medical_records/node_modules/@arcium-hq/client/build/index.cjs:8261:24)
Retrying in 500ms... (attempt 8/10)
Attempt 9 failed to fetch MXE public key: Error: Account does not exist or has no data 7nSRR1844LguKJUnh8CA6AKCwd5u7K1Lx4EhPdCeXK5y
    at AccountClient.fetch (/home/n4beel/Desktop/Projects/arcium-examples/share_medical_records/node_modules/@coral-xyz/anchor/src/program/namespace/account.ts:168:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at getMXEPublicKey (/home/n4beel/Desktop/Projects/arcium-examples/share_medical_records/node_modules/@arcium-hq/client/build/index.cjs:8261:24)
Retrying in 500ms... (attempt 9/10)
Attempt 10 failed to fetch MXE public key: Error: Account does not exist or has no data 7nSRR1844LguKJUnh8CA6AKCwd5u7K1Lx4EhPdCeXK5y
    at AccountClient.fetch (/home/n4beel/Desktop/Projects/arcium-examples/share_medical_records/node_modules/@coral-xyz/anchor/src/program/namespace/account.ts:168:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at getMXEPublicKey (/home/n4beel/Desktop/Projects/arcium-examples/share_medical_records/node_modules/@arcium-hq/client/build/index.cjs:8261:24)
    1) can store and share patient data confidentially!


  0 passing (8s)
  1 failing

  1) ShareMedicalRecords
       can store and share patient data confidentially!:
     Error: Failed to fetch MXE public key after 10 attempts
      at /home/n4beel/Desktop/Projects/arcium-examples/share_medical_records/tests/share_medical_records.ts:313:9
      at Generator.throw (<anonymous>)
      at rejected (tests/share_medical_records.ts:29:65)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)



error Command failed with exit code 1.
info Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.
 Container artifacts-arx-node-0-1  Stopping
 Container artifacts-arx-node-1-1  Stopping
 Container artifacts-arx-node-0-1  Stopped
 Container artifacts-arx-node-1-1  Stopped

thread 'main' panicked at /home/runner/work/arcium-tooling/arcium-tooling/cli/src/lib.rs:579:17:
Test failed
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
